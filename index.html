<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Testapi : ">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Testapi</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/MC-3123/TestAPI">View on GitHub</a>

          <h1 id="project_title">Testapi</h1>
          <h2 id="project_tagline"></h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/MC-3123/TestAPI/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/MC-3123/TestAPI/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="ccountbility-web-api-standards" class="anchor" href="#ccountbility-web-api-standards" aria-hidden="true"><span class="octicon octicon-link"></span></a><a href="https://github.com/ccount" class="user-mention">@ccount</a>@bility Web API Standards</h1>

<ul>
<li><a href="#guidelines">Guidelines</a></li>
<li><a href="#pragmatic-rest">Pragmatic REST</a></li>
<li><a href="#restful-urls">RESTful URLs</a></li>
<li><a href="#http-verbs">HTTP Verbs</a></li>
<li><a href="#responses">Responses</a></li>
<li><a href="#error-handling">Error handling</a></li>
<li><a href="#versions">Versions</a></li>
<li><a href="#record-limits">Record limits</a></li>
<li><a href="#request--response-examples">Request &amp; Response Examples</a></li>
<li><a href="#mock-responses">Mock Responses</a></li>
<li><a href="#jsonp">JSONP</a></li>
</ul>

<h2>
<a id="guidelines" class="anchor" href="#guidelines" aria-hidden="true"><span class="octicon octicon-link"></span></a>Guidelines</h2>

<p>This document provides guidelines and examples for <a href="https://github.com/ccount" class="user-mention">@ccount</a>@bility Web APIs, encouraging consistency, maintainability, and best practices across applications. <a href="https://github.com/ccount" class="user-mention">@ccount</a>@bility APIs aim to balance a truly RESTful API interface with a positive developer experience (DX).</p>

<p>This document borrows heavily from:</p>

<ul>
<li><a href="https://www.youtube.com/watch?v=zEyg0TnieLg">Designing HTTP Interfaces and RESTful Web Services</a></li>
<li>
<a href="http://apigee.com/about/resources/ebooks/api-fa%C3%A7ade-pattern">API Facade Pattern</a>, by Brian Mulloy, Apigee</li>
<li>
<a href="http://pages.apigee.com/web-api-design-ebook.html">Web API Design</a>, by Brian Mulloy, Apigee</li>
<li><a href="http://www.ics.uci.edu/%7Efielding/pubs/dissertation/top.htm">Fielding's Dissertation on REST</a></li>
</ul>

<h2>
<a id="pragmatic-rest" class="anchor" href="#pragmatic-rest" aria-hidden="true"><span class="octicon octicon-link"></span></a>Pragmatic REST</h2>

<p>These guidelines aim to support a truly RESTful API. Here are a few exceptions:</p>

<ul>
<li>Put the version number of the API in the URL (see examples below). Don’t accept any requests that do not specify a version number.</li>
<li>Allow users to request formats like JSON or XML like this:

<ul>
<li>http://@<a href="mailto:ccount@bility.com">ccount@bility.com</a>/api/v1/clients.json</li>
<li>http://@<a href="mailto:ccount@bility.com">ccount@bility.com</a>/api/v1/clients.xml</li>
</ul>
</li>
</ul>

<h2>
<a id="restful-urls" class="anchor" href="#restful-urls" aria-hidden="true"><span class="octicon octicon-link"></span></a>RESTful URLs</h2>

<h3>
<a id="general-guidelines-for-restful-urls" class="anchor" href="#general-guidelines-for-restful-urls" aria-hidden="true"><span class="octicon octicon-link"></span></a>General guidelines for RESTful URLs</h3>

<ul>
<li>A URL identifies a resource.</li>
<li>URLs should include nouns, not verbs.</li>
<li>Use plural nouns only for consistency (no singular nouns).</li>
<li>Use HTTP verbs (GET, POST, PUT, DELETE) to operate on the collections and elements.</li>
<li>You shouldn’t need to go deeper than resource/identifier/resource.</li>
<li>Put the version number at the base of your URL, for example <a href="http://example.com/v1/path/to/resource">http://example.com/v1/path/to/resource</a>.</li>
<li>URL v. header:

<ul>
<li>If it changes the logic you write to handle the response, put it in the URL.</li>
<li>If it doesn’t change the logic for each response, like OAuth info, put it in the header.</li>
</ul>
</li>
<li>Specify optional fields in a comma separated list.</li>
<li>Formats should be in the form of api/v2/resource/{id}.json</li>
</ul>

<h3>
<a id="good-url-examples" class="anchor" href="#good-url-examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Good URL examples</h3>

<ul>
<li>List of clients:

<ul>
<li>GET <a href="http://www.@ccount@bility.com/api/v1/clients.json">http://www.@ccount@bility.com/api/v1/clients.json</a>
</li>
</ul>
</li>
<li>Filtering is a query:

<ul>
<li>GET <a href="http://www.@ccount@bility.com/api/v1/clients.json?company=20&amp;sort=desc">http://www.@ccount@bility.com/api/v1/clients.json?company=20&amp;sort=desc</a>
</li>
<li>GET <a href="http://www.@ccount@bility.com/api/v1/jobs.json?client=20&amp;company=11">http://www.@ccount@bility.com/api/v1/jobs.json?client=20&amp;company=11</a>
</li>
</ul>
</li>
<li>A single client in JSON format:

<ul>
<li>GET <a href="http://www.@ccount@bility.com/api/v1/clients/1234.json">http://www.@ccount@bility.com/api/v1/clients/1234.json</a>
</li>
</ul>
</li>
<li>All jobs in (or belonging to) this client:

<ul>
<li>GET <a href="http://www.@ccount@bility.com/api/v1/clients/1234/jobs.json">http://www.@ccount@bility.com/api/v1/clients/1234/jobs.json</a>
</li>
</ul>
</li>
<li>All jobs in this client in XML format:

<ul>
<li>GET <a href="http://www.@ccount@bility.com/api/v1/clients/1234/jobs.xml">http://www.@ccount@bility.com/api/v1/clients/1234/jobs.xml</a>
</li>
</ul>
</li>
<li>Specify optional fields in a comma separated list:

<ul>
<li>GET <a href="http://www.@ccount@bility.com/api/v1/clients/1234.json?fields=Currency,Company,ClientManager">http://www.@ccount@bility.com/api/v1/clients/1234.json?fields=Currency,Company,ClientManager</a>
</li>
<li>Add a new job to a particular client:</li>
<li>POST <a href="http://www.@ccount@bility.com/api/v1/clients/1234/jobs">http://www.@ccount@bility.com/api/v1/clients/1234/jobs</a>
</li>
</ul>
</li>
</ul>

<h3>
<a id="bad-url-examples" class="anchor" href="#bad-url-examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Bad URL examples</h3>

<ul>
<li>Non-plural noun:

<ul>
<li><a href="http://www.@ccount@bility.com/client">http://www.@ccount@bility.com/client</a></li>
<li><a href="http://www.@ccount@bility.com/client/1234">http://www.@ccount@bility.com/client/1234</a></li>
<li><a href="http://www.@ccount@bility.com/company/client/1234">http://www.@ccount@bility.com/company/client/1234</a></li>
</ul>
</li>
<li>Verb in URL:

<ul>
<li><a href="http://www.@ccount@bility.com/client/1234/create">http://www.@ccount@bility.com/client/1234/create</a></li>
</ul>
</li>
<li>Filter outside of query string

<ul>
<li><a href="http://www.@ccount@bility.com/jobs/2011/desc">http://www.@ccount@bility.com/jobs/2011/desc</a></li>
</ul>
</li>
</ul>

<h2>
<a id="http-verbs" class="anchor" href="#http-verbs" aria-hidden="true"><span class="octicon octicon-link"></span></a>HTTP Verbs</h2>

<p>HTTP verbs, or methods, should be used in compliance with their definitions under the <a href="http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html">HTTP/1.1</a> standard.
The action taken on the representation will be contextual to the media type being worked on and its current state. Here's an example of how HTTP verbs map to create, read, update, delete operations in a particular context:</p>

<table>
<thead>
<tr>
<th>HTTP METHOD</th>
<th>POST</th>
<th>GET</th>
<th>PUT</th>
<th>DELETE</th>
</tr>
</thead>
<tbody>
<tr>
<td>CRUD OP</td>
<td>CREATE</td>
<td>READ</td>
<td>UPDATE</td>
<td>DELETE</td>
</tr>
<tr>
<td>/dogs</td>
<td>Create new dogs</td>
<td>List dogs</td>
<td>Bulk update</td>
<td>Delete all dogs</td>
</tr>
<tr>
<td>/dogs/1234</td>
<td>Error</td>
<td>Show Bo</td>
<td>If exists, update Bo; If not, error</td>
<td>Delete Bo</td>
</tr>
</tbody>
</table>

<p>(Example from Web API Design, by Brian Mulloy, Apigee.)</p>

<h2>
<a id="responses" class="anchor" href="#responses" aria-hidden="true"><span class="octicon octicon-link"></span></a>Responses</h2>

<ul>
<li>No values in keys</li>
<li>No internal-specific names (e.g. "node" and "taxonomy term")</li>
<li>Metadata should only contain direct properties of the response set, not properties of the members of the response set</li>
</ul>

<h3>
<a id="good-examples" class="anchor" href="#good-examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Good examples</h3>

<p>No values in keys:</p>

<pre><code>"tags": [
  {"id": "125", "name": "Environment"},
  {"id": "834", "name": "Water Quality"}
],
</code></pre>

<h3>
<a id="bad-examples" class="anchor" href="#bad-examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Bad examples</h3>

<p>Values in keys:</p>

<pre><code>"tags": [
  {"125": "Environment"},
  {"834": "Water Quality"}
],
</code></pre>

<h2>
<a id="error-handling" class="anchor" href="#error-handling" aria-hidden="true"><span class="octicon octicon-link"></span></a>Error handling</h2>

<p>Error responses should include a common HTTP status code, message for the developer, message for the end-user (when appropriate), internal error code (corresponding to some specific internally determined ID), links where developers can find more info. For example:</p>

<pre><code>{
  "status" : 400,
  "developerMessage" : "Verbose, plain language description of the problem. Provide developers
   suggestions about how to solve their problems here",
  "userMessage" : "This is a message that can be passed along to end-users, if needed.",
  "errorCode" : "444444",
  "moreInfo" : "http://www.@ccount@bility.com/developer/path/to/help/for/444444,
   http://drupal.org/node/444444",
}
</code></pre>

<p>Use three simple, common response codes indicating (1) success, (2) failure due to client-side problem, (3) failure due to server-side problem:</p>

<ul>
<li>200 - OK</li>
<li>400 - Bad Request</li>
<li>500 - Internal Server Error</li>
</ul>

<h2>
<a id="versions" class="anchor" href="#versions" aria-hidden="true"><span class="octicon octicon-link"></span></a>Versions</h2>

<ul>
<li>Never release an API without a version number.</li>
<li>Versions should be integers, not decimal numbers, prefixed with ‘v’. For example:

<ul>
<li>Good: v1, v2, v3</li>
<li>Bad: v-1.1, v1.2, 1.3</li>
</ul>
</li>
<li>Maintain APIs at least one version back.</li>
</ul>

<h2>
<a id="record-limits" class="anchor" href="#record-limits" aria-hidden="true"><span class="octicon octicon-link"></span></a>Record limits</h2>

<ul>
<li>If no limit is specified, return results with a default limit.</li>
<li>To get records 51 through 75 do this:

<ul>
<li><a href="http://example.gov/clients?limit=25&amp;offset=50">http://example.gov/clients?limit=25&amp;offset=50</a></li>
<li>offset=50 means, ‘skip the first 50 records’</li>
<li>limit=25 means, ‘return a maximum of 25 records’</li>
</ul>
</li>
</ul>

<p>Information about record limits and total available count should also be included in the response. Example:</p>

<pre><code>{
    "metadata": {
        "resultset": {
            "count": 227,
            "offset": 25,
            "limit": 25
        }
    },
    "results": []
}
</code></pre>

<h2>
<a id="request--response-examples" class="anchor" href="#request--response-examples" aria-hidden="true"><span class="octicon octicon-link"></span></a>Request &amp; Response Examples</h2>

<h3>
<a id="api-resources" class="anchor" href="#api-resources" aria-hidden="true"><span class="octicon octicon-link"></span></a>API Resources</h3>

<ul>
<li><a href="#get-clients">GET /clients</a></li>
<li><a href="#get-clientsid">GET /clients/[id]</a></li>
<li><a href="#post-clientsidjobs">POST /clients/[id]/jobs</a></li>
</ul>

<h3>
<a id="get-clients" class="anchor" href="#get-clients" aria-hidden="true"><span class="octicon octicon-link"></span></a>GET /clients</h3>

<p>Example: http://@<a href="mailto:account@bility.com">account@bility.com</a>/api/v1/clients.json</p>

<p>Response body:</p>

<pre><code>{
    "metadata": {
        "resultset": {
            "count": 123,
            "offset": 0,
            "limit": 10
        }
    },
    "results": [
        {
            "id": "1234",
            "type": "client",
            "title": "Public Water Systems",
            "tags": [
                {"id": "125", "name": "Environment"},
                {"id": "834", "name": "Water Quality"}
            ],
            "created": "1231621302"
        },
        {
            "id": 2351,
            "type": "client",
            "title": "Public Schools",
            "tags": [
                {"id": "125", "name": "Elementary"},
                {"id": "834", "name": "Charter Schools"}
            ],
            "created": "126251302"
        }
        {
            "id": 2351,
            "type": "client",
            "title": "Public Schools",
            "tags": [
                {"id": "125", "name": "Pre-school"},
            ],
            "created": "126251302"
        }
    ]
}
</code></pre>

<h3>
<a id="get-clientsid" class="anchor" href="#get-clientsid" aria-hidden="true"><span class="octicon octicon-link"></span></a>GET /clients/[id]</h3>

<p>Example: http://@<a href="mailto:account@bility.com">account@bility.com</a>/api/v1/clients/[id].json</p>

<p>Response body:</p>

<pre><code>{
    "id": "1234",
    "type": "client",
    "title": "Public Water Systems",
    "tags": [
        {"id": "125", "name": "Environment"},
        {"id": "834", "name": "Water Quality"}
    ],
    "created": "1231621302"
}
</code></pre>

<h3>
<a id="post-clientsidarticles" class="anchor" href="#post-clientsidarticles" aria-hidden="true"><span class="octicon octicon-link"></span></a>POST /clients/[id]/articles</h3>

<p>Example: Create – POST  http://@<a href="mailto:account@bility.com">account@bility.com</a>/api/v1/clients/[id]/articles</p>

<p>Request body:</p>

<pre><code>[
    {
        "title": "Raising Revenue",
        "author_first_name": "Jane",
        "author_last_name": "Smith",
        "author_email": "jane.smith@example.gov",
        "year": "2012",
        "month": "August",
        "day": "18",
        "text": "Lorem ipsum dolor sit amet, consectetur adipiscing elit. Etiam eget ante ut augue scelerisque ornare. Aliquam tempus rhoncus quam vel luctus. Sed scelerisque fermentum fringilla. Suspendisse tincidunt nisl a metus feugiat vitae vestibulum enim vulputate. Quisque vehicula dictum elit, vitae cursus libero auctor sed. Vestibulum fermentum elementum nunc. Proin aliquam erat in turpis vehicula sit amet tristique lorem blandit. Nam augue est, bibendum et ultrices non, interdum in est. Quisque gravida orci lobortis... "
    }
]
</code></pre>

<h2>
<a id="mock-responses" class="anchor" href="#mock-responses" aria-hidden="true"><span class="octicon octicon-link"></span></a>Mock Responses</h2>

<p>It is suggested that each resource accept a 'mock' parameter on the testing server. Passing this parameter should return a mock data response (bypassing the backend).</p>

<p>Implementing this feature early in development ensures that the API will exhibit consistent behavior, supporting a test driven development methodology.</p>

<p>Note: If the mock parameter is included in a request to the production environment, an error should be raised.</p>

<h2>
<a id="jsonp" class="anchor" href="#jsonp" aria-hidden="true"><span class="octicon octicon-link"></span></a>JSONP</h2>

<p>JSONP is easiest explained with an example. Here's one from <a href="http://stackoverflow.com/questions/2067472/what-is-jsonp-all-about?answertab=votes#tab-top">StackOverflow</a>:</p>

<blockquote>
<p>Say you're on domain abc.com, and you want to make a request to domain xyz.com. To do so, you need to cross domain boundaries, a no-no in most of browserland.</p>

<p>The one item that bypasses this limitation is <code>&lt;script&gt;</code> tags. When you use a script tag, the domain limitation is ignored, but under normal circumstances, you can't really DO anything with the results, the script just gets evaluated.</p>

<p>Enter JSONP. When you make your request to a server that is JSONP enabled, you pass a special parameter that tells the server a little bit about your page. That way, the server is able to nicely wrap up its response in a way that your page can handle.</p>

<p>For example, say the server expects a parameter called "callback" to enable its JSONP capabilities. Then your request would look like:</p>

<pre><code>    http://www.xyz.com/sample.aspx?callback=mycallback
</code></pre>

<p>Without JSONP, this might return some basic javascript object, like so:</p>

<pre><code>    { foo: 'bar' }
</code></pre>

<p>However, with JSONP, when the server receives the "callback" parameter, it wraps up the result a little differently, returning something like this:</p>

<pre><code>    mycallback({ foo: 'bar' });
</code></pre>

<p>As you can see, it will now invoke the method you specified. So, in your page, you define the callback function:</p>

<pre><code>    mycallback = function(data){
        alert(data.foo);
    };
</code></pre>
</blockquote>

<p><a href="http://stackoverflow.com/questions/2067472/what-is-jsonp-all-about?answertab=votes#tab-top">http://stackoverflow.com/questions/2067472/what-is-jsonp-all-about?answertab=votes#tab-top</a></p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Testapi maintained by <a href="https://github.com/MC-3123">MC-3123</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

    

  </body>
</html>
